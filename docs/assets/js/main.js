"use strict";const searchInput=document.querySelector(".js-search-input"),searchBtn=document.querySelector(".js-search-btn"),main=document.querySelector(".js-main"),aside=document.querySelector(".js-aside");let favs=[],matches=[],inputValue="",favsJSON=localStorage.getItem("favoritos");function handleSearch(e){e.preventDefault(),inputValue=searchInput.value,fetch("//api.tvmaze.com/search/shows?q="+inputValue).then(e=>e.json()).then(e=>{matches=e,renderList(matches,main,"matches")})}function renderShow(e){let t=e.show.id,s=e.show.name,n="";return n+=`<li class="js-item" id="${t}"><article>\n  <img\n  src=${e.show.image?e.show.image.medium:"https://via.placeholder.com/210x295/ffffff/666666/?text="+s}\n  alt="Picture of ${s}"\n  />\n  <h3>${s.toUpperCase()} </h3>\n   </article>\n </li>`,n}function renderList(e,t,s){t.innerHTML=`<ul class="js-${s}"></ul>`;let n=document.querySelector(".js-"+s);for(const t of e)n.innerHTML+=renderShow(t);addShowListeners()}function handleShow(e){const t=e.currentTarget,s=parseInt(t.id),n=matches.find(e=>e.show.id===s),a=favs.findIndex(e=>e.show.id===s);-1===a?(favs.push(n),t.classList.add("selected")):(favs.splice(a,1),t.classList.remove("selected"));let r=JSON.stringify(favs);localStorage.setItem("favoritos",r),renderList(favs,aside,"favs")}function addShowListeners(){const e=document.querySelectorAll(".js-item");for(const t of e)t.addEventListener("click",handleShow)}null!==favsJSON&&(favs=JSON.parse(favsJSON)),renderList(favs,aside),searchBtn.addEventListener("click",handleSearch);